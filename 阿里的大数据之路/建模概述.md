## 什么是数据模型

数据模型就是**数据组织和存储方法**，它强调从业务，数据存取和使用角度合理存储数据。

## 为什么需要建模

将数据有序的组织和存储起来。要想把数据有序地组织储存起来，就得遵循一定的方法和理论。此处把遵循的方法和理论称为模型。数仓的建模，强调的一个动作。

## 建模的好处

- 高性能：良好的数据模型能够帮助我们快速查询所需要的数据。
- 低成本：良好的数据模型能减少重复计算，实现计算结果的复用，降低计算成本。
- 高效率：良好的数据模型能极大的改善用户使用数据的体验，提高使用数据的效率。
- 高质量：良好的数据模型能改善数据统计口径的混乱，减少计算错误的可能性。



## 建模的方法

### ER模型

从全企业的高度，用**实体关系**（Entity Relationship，ER）模型来描述企业业务，并用**规范化**的方式表示出来，在范式理论上**符合3NF**。

#### 实体关系模型

实体关系模型将复杂的数据抽象为两个概念——****实体和关系****。实体表示一个对象，例如学生、班级，关系是指两个实体之间的关系，例如学生和班级之间的从属关系。

#### 数据库规范化

数据库规范化是使用一系列范式设计数据库（通常是关系型数据库）的过程，其目的是减少数据冗余，增强数据的一致性。（同一个字段，存在多个值，导致不唯一）

遵循的范式级别越高，数据冗余性就越低。

#### ER模型的特点

- 需要全面了解业务和数据
- 实施周期非常长
- 建模人员能力要求非常高

#### 第一范式

第一范式 1NF 核心原则是：属性不可切割

#### 第二范式

第二范式 2NF 核心原则是：不能存在 “部分函数依赖”

部分函数依赖 ： 通过 AB 能得出 C，通过 A 也可以得出 C ，或者通过 B 也可以得出 C ，那么说 C 部分依赖于 AB。

#### 第三范式

第二范式 2NF 核心原则是：不能存在 “传递函数依赖”

传递函数依赖：通过 A 得到 B ，通过 B 得到 C 。说明 C 传递依赖于 A

### 维度建模

维度模型将复杂的业务通过**事实和维度**两个概念进行呈现。事实通常对应**业务过程**，而维度通常对应**业务过程发生时所处的环境**。

#### 业务过程

指的是企业的业务活动事件。如下单，支付，退款都是业务过程。请注意：业务过程是一个不可拆分的行为事件。

#### 事实和维度

下图为一个典型的维度模型，其中位于中心的SalesOrder为**事实表**，**其中保存的是下单这个业务过程的所有记录**。位于周围每张表都是**维度表**，包括Date（日期），Customer（顾客），Product（产品），Location（地区）等，这些**维度表就组成了每个订单发生时所处的环境**，即何人、何时、在何地下单了何种产品。

![image-20220318235806611](https://ssuublog.oss-cn-shenzhen.aliyuncs.com/%E6%95%B0%E4%BB%93%E5%BB%BA%E6%A8%A1/%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1.png)

