# 新增用户

**useradd**  命令用于创建新的用户，格式为 “useradd [选项] 用户名”。 可以使用 useradd 命令创建用户账户。使用该命令创建用户账户时，默认的用户家目录会 被存放在/home 目录中，默认的 Shell 解释器为/bin/bash，而且默认会创建一个与该用户同名 的基本用户组。

一般没有特殊的要求，我们可以直接 **useradd + 名字** ，其他的参数默认就是了。

### 命令中的参数以及作用

| 参数 |                   作用                    |
| :--: | :---------------------------------------: |
|  -d  | 指定用户的家目录（默认为/home/username）  |
|  -e  |    账户的到期时间，格式为 YYYY-MM-DD.     |
|  -u  |           指定该用户的默认 UID            |
|  -g  |  指定一个初始的用户基本组（必须已存在）   |
|  -G  | 指定一个或多个扩展用户组，添加多个前面 -a |
|  -N  |       不创建与用户同名的基本用户组        |
|  -s  |       指定该用户的默认 Shell 解释器       |

### 相关的知识点

查看当前用户的组信息 id + 用户名

查看全部用户 cat /etc/passwd，如果查看这个文件最后是 /sbin/nologin ，说明这个用户被禁止登录了。

# 修改用户

**usermod** 命令用于修改用户的属性，格式为 “usermod [选项] 用户名”。用户的信息保存在/etc/passwd 文件中，可以直接用文本编辑器来修改其中的 用户参数项目，也可以用 usermod 命令修改已经创建的用户信息。但是这里更加推荐修改文件的方式去修改用户的信息

![image-20211221132104709](https://ssuublog.oss-cn-shenzhen.aliyuncs.com/typecho/linux/etcpasswd.png)

如果要修改用户的名字以及所归属的组，修改 /etc/passwd 这个文件就好。看上图找到对应的地方改就是了。

# 删除用户

**userdel**  [-r]  username

带上参数 -r 说明连同 home 目录下的文件夹也一起删除掉。参数 -f 是强制删除用户。

# 新增组

**groupadd** 命令用于创建用户组，格式为 “groupadd [选项] 群组名”。一个用户可以有很多个组，可以大概划分为基本用户组和扩展用户组。

在《鸟哥的Linux私房菜》一书中提到两个概念，一个是有效群组，一个是初始群组，所谓初始群组，就是在创建这个用户的时候，就已经分配了一个初始群组，当然也可以使用 -g 去指定一个群组。上面说过了我们使用 usermod -G 去指定一个扩展用户组。

### 查看用户所属的组

**groups** 指令。查看用户归属的所有组，其中第一个是有效群组，也就是说，我的有效群组为 dmtsai 啦～ 此时，如果我以 touch 去建立一个新档，例如：『 touch test 』，那么这个文件的拥有者为 dmtsai ， 而且群组也是 dmtsai 的啦。

查看组有那些用户，改组名字之类的，都可以通过修改 /etc/group 文件进行操作。当然 直接输入 id 也是看到相关的数据。

/etc/group 文件结构 ： 组名 ：x ：gid：此群组支持的账号名称

### 切换组

**newgrp** + 组名

# 修改组

groupmod [-g gid] [-n group_name] 群组名。但是不推荐改组id，一般改名字就好了。带上参数 -n 即可。

# 删除组

groupdel + 组名。在删除之前要注意的是：必须要确认 /etc/passwd 内的账号没有任何人使用该群组作为 initial group

