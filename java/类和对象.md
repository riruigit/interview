# 类和对象的那些事

## 学习的主线

1. java类以及类的属性，方法，构造器，代码块，内部类等
2. 面向对象的三大特性，封装继承多态
3. 其它关键字：this、super、static、final、abstract、interface、package、import等

## 面向过程和面向对象

两者是一种思想，面向过程：强调的是**功能行为**。以函数为最小单位，考虑怎么做。面向对象：**将功能封装进对象**，强调了具备了功能的对象，以类/对象为最小单位，考虑谁来做。

![image-20220508221635300](https://ssuublog.oss-cn-shenzhen.aliyuncs.com/java/%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/%E6%8A%8A%E5%A4%A7%E8%B1%A1%E8%A3%85%E8%BF%9B%E5%86%B0%E7%AE%B1.png)

## 类和对象概念

### 类的概念

类的概念是为了让程序设计语言能更清楚地描述日常生活中的事物。类是对某一类事物的描述，是抽象的，概念上的定义。

对象的概念是实际存在的该类事物的具体个体，因而也被称为实例。

如果将对象比作汽车，那么类就是汽车的设计图纸。

### 类的组成

类是将数据和方法封装在一起的一种特殊的数据结构，其中数据表示类的属性，方法表示类的行为。定义类的实际就是定义类的属性和方法。

### 类的定义

1. 定义类（考虑修饰符，类名）
2. 编写类的属性（考虑修饰符，属性类型，属性名，属性初始值）
3. 编写类的方法（考虑修饰符，返回值类型，方法名，形参）

## 类的修饰符

修饰符：类的修饰符是限定类，成员变量，成员方法是否可以被程序里的其他部分访问和调用的控制符。其中关于类的修饰符有4个。

一个类可以有多个修饰符，而且没有先后的顺序，但是 abstract 和 final 相互对立，所以不能定义在同一个类上。

| 类的修饰符 | 含义                                                         |
| ---------- | ------------------------------------------------------------ |
| public     | 将一个类声明为公共类，它可以被任何对象访问                   |
| abstract   | 将一个类声明为抽象类，没有实现方法，需要子类提供方法的实现，所以不能创建该类的实例 |
| final      | 将一个类声明为最终类即非继承类，表示它不能被其他类所继承     |
| 缺省       | 缺省修饰符时，（也就是没有）则表示只有在相同包中的对象才能使用这样的类 |

## 成员变量的修饰符

上面提到的是类的修饰符，一共有四个。然而，成员变量（属性）也有其对应的修饰符。其实也可以分为两大类，一个是访问控制符，一个是修饰符。

| 属性的修饰符 | 含义                                                         |
| ------------ | ------------------------------------------------------------ |
| public       | 公共访问控制符，指定该变量是**公共的**，它可以被任何对象的方法访问 |
| private      | 私有访问控制符，指定该变量是**私有的**，只允许自己类中的方法访问，任何其他类（包括子类）中的方法都不能访问此变量 |
| protected    | **保护访问控制符**，指定该变量只可以被它自己的类及其子类或者同一包中的其他类访问，在子类中可以覆盖此变量 |
| final        | **最终修饰符**，指定该变量的值不能改变                       |
| static       | **静态修饰符**，指定该变量被所有对象共享，即所有的实例都可以使用该变量 |
| transient    | 过渡修饰符，指定该变量是一个系统保留，暂无特别作用的临时性变量 |
| volatile     | 易失修饰符，指定该变量可以同时被几个线程控制和修改           |
| 缺省         | 缺省访问控制符时，则表示在同一包中的其他类可以访问此成员变量，其他包中的类不能访问该成员变量 |

## 成员方法的修饰符

上面在创建类的时候，不仅有类，成员变量的修饰词，成员方法也有其对应的修饰词。

| 成员方法的修饰符 | 含义                                                         |
| ---------------- | ------------------------------------------------------------ |
| public           | 公共访问控制符，指定方法是公共的，它可以被任何对象的方法访问 |
| private          | 私有访问控制符，指定方法只允许自己类的方法访问，其他任何类（包括子类）中的方法均不能访问此方法 |
| protected        | 保护访问控制符，指定方法只可以被它的类及其子类或同一包中的其他类访问 |
| 缺省             | 缺省访问控制符时，则表示在同一包中的其他类可以访问此成员方法，而其他包中的类不能访问该成员方法 |
| final            | 最终修饰符，指定方法不能被覆盖                               |
| static           | 静态修饰符，指定不需要实例化一个对象就可以调用的方法         |
| abstract         | 抽象修饰符，指定该方法只声明方法头，而没有方法体，抽象方法需要在子类中被实现 |
| synchronized     | 同步修饰符，在多线程程序中，该修饰符用于对同步资源加锁，以防止其他线程访问，运行结束后解锁 |
| native           | 本地修饰符，指定此方法的方法体是用其他语音（如C语言）在程序外部编写的 |

## 成员变量和局部变量的区别

类中定义的变量是成员变量，在方法中定义的变量是局部变量。

从语法上看，成员变量是属于类的，而局部变量是在方法中定义的变量或是方法的参数。

从修饰符上看，成员变量可以被 public , private , static 等修饰符所修饰，而局部变量则不能被访问控制修饰符（这里是成员变量的访问控制符：public private protected 缺省）及static所修饰。但成员变量和局部变量都可以被 final 所修饰。（final可以出现在成员方法里面的局部变量，当然也可以在定义方法参数的括号里面）

从在内存上的存储方式来看，成员变量是对象的一部分，而对象是存在在堆内存的，而局部变量是存在在栈内存上的。

从内存的存活时间上看，成员变量是对象的一部分，他随着对象的创建而存在，而局部变量是随着方法的调用而产生，随着方法调用的结束而自动消失。

从赋值的方式上看，成员变量如果没有赋初值，则会自动按照类型赋一个默认值。但是局部变量不会，不会自动赋值，必须要显式地赋值后才能使用。

### 对象的创建和使用

对象是类的实例，所以对象是属于某个已知的类，因此要创建属于某个类的对象，可以通过下面的步骤来完成。

1. 声明指向 “由类所创建的对象”的变量。
2. 利用 new 运算符创建新的对象，并指派给前面所创建的变量。

例如：Student stu 	 声明指向对象的变量stu

stu = new Student();	// 利用 new 创建新的对象，并让变量 stu 指向它。

综合起来就是

创建语法：类名 对象名 = new 类名();

访问成员：直接对象名.对象成员（包括属性+方法）

### 关于new的数据内存分布

在栈内存上定义了一个变量 stu ，用来指向通过new运算符在堆内存上创建的一个Student类的实例对象。也就是说：变量 stu 是对存放在堆内存中对象的引用变量。是一个变量，并非是对象本身。

Student stu = new Student() ;

左边的变量在栈内存，右边的对象在堆内存。

### 关于值传递和引用传递

Java语言在给被调用方法的参数赋值时，只有采用值传递的方式。所以，基本类型数据传递的是该数据的值本身，而引用类型数据传递的也是这个变量的值本身，即对象的引用变量，而非对象本身。通过方法调用，可以改变对象的内容，但对象的引用变量是不能改变的。

简而言之，就是当参数类型是基本数据类型时，是传值方式调用，而当参数类型是引用类型时，也是传值方式，只不过这个值其实是一个地址值，这种方式也被称为传址方式调用。
